---
layout: post
title:  "Innodb-index整理02"
date:   2019-5-19 22:00:00
categories: 数据库
---

索引树使用的数据结构是B+树

![avatar](https://raw.githubusercontent.com/daysleep666/blog/master/src/img/article/indextree.jpg)

非叶子节点存储的是什么

    非叶子节点存储的是导航信息，即本身代表的key和指向下一个节点的指针

叶子节点存储的是什么

    叶子节点存储的是实际数据，也称卫星数据

聚簇索引树和非聚簇索引树是否有区别，如果有，区别是什么

    对于聚簇索引和非聚簇索引，生成的索引树，叶子节点部分存储的值是不一样的。

    聚簇索引树的叶子节点存储的是主键和那一行全部的数据。

    非聚簇索引树的叶子节点存储的是索引值和主键。

索引树的插入和删除是什么样子的

    就是B+树的规则，插入操作会拆分节点的元素，删除操作会合并节点的元素。

什么情况下会触发索引，什么情况下不会。

    依照最左前缀原则查询就会触发索引。
    
    比方说有个索引是(col1,col2,col3)，那条件为(col1),(col1,col2),(col1,col2,col3)都会触发索引。
    
    但是(col2),(col2,col3)就不会触发索引。

使用索引的优点和缺点

    索引的优点是加快查询速度和减少磁盘IO。比方说，有个100叉的B+树的索引树存在硬盘上，一共有一亿的数据量，那在查询的时候只需要4次磁盘IO就可以找到数据了。就好像找一本书中的某一个章节的某一段话，看目录找章节页数的效率要远高于一页一页的翻找。

    索引的缺点是，每当删除或者添加数据的时候，索引树都会发生改变。所以一个表的索引不能建太多。

什么是覆盖索引，什么时候需要回表

    如果当需要查询的数据就是索引包含的数据，就称为覆盖索引，如果查询的数据索引里并不包含，就需要根据存储的聚簇索引，去到聚簇索引树里获得，这个过程称为回表。