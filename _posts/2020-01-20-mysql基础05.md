---
layout: post
title:  "mysql基础05-行锁"
date:   2020-01-16 22:00:00
categories: mysql
---

## 什么是两阶段锁

在事务需要更新的时候加上行锁,但不在用完的时候解锁,而是commit或rollback的时候解锁

## 如何减少锁对并发对影响

晚用晚加锁,将更新密集的操作往后放

## 什么是死锁

事务A等事务B释放资源,事务B等事务A释放资源

## 如何处理死锁

1. 加上等待时间,默认50s
2. 死锁检测

## 热点行更新导致的性能问题

一万个线程更改同一行数据,会导致大量死锁检测,造成cpu爆满

## 怎么解决热点行更新导致的性能问题

1. 控制并发线程
2. 将一行拆成N行