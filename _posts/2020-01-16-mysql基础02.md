---
layout: post
title:  "mysql基础02-事务"
date:   2020-01-16 22:00:00
categories: mysql
---

# 事务

### ACID

- A: 原子性,不可被分割
- C：一致性,回滚后数据保持一致
- I：隔离型,事务独立,不被影响
- D：持久性,崩溃恢复后数据不会丢失

### 事务隔离级别

- 未提交读：事务对数据的修改未提交就可以被其他事务看到
- 提交读：事务对数据的修改提交后就会被其他事务看的
- 可重复读：事务对数据的修改提交或不提交都不会影响其他事务
- 串型化：只有一个事务完成后才会做下一个事务

### 脏数据

- 脏读：事务未提交的数据被其他事务使用了。出现在未提交读隔离级别。
- 不可重复读：事务两次select,数据前后不一致。出现在未提交读,提交读隔离级别。
- 幻读：事务两次select,发现数据多出来了。出现在未提交读,提交读,可重复读隔离级别。TODO：还是不太熟悉这个

### MVCC

通过事务版本管理的方式避免了事务加锁带来的开销

事务的每个更新操作都会记录一条回滚log,通过最新的值和回滚log可以得到之前的任意一个值。

